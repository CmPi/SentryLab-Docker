#!/bin/bash

#
# @file /usr/local/etc/sentrylab.conf
# @author CmPi <github.com/CmPi>
# @brief SentryLab Configuration File (Shared Template)
# @date creation 2026-01-11
# @version 0.1.11
# @usage Shared between SentryLab-PVE and SentryLab-Docker
#

# ==============================================================================
# DEBUG SETTINGS
# ==============================================================================
DEBUG=true                  # true enables debug mode (no MQTT transmission)
                            # false disables debug mode (production)

# ==============================================================================
# MQTT CONFIGURATION
# ==============================================================================
BROKER="192.168.x.x"        # MQTT broker IP address or hostname
PORT="1883"                 # MQTT broker port (default: 1883, TLS: 8883)
USER="your_mqtt_user"       # MQTT username for authentication
PASS="your_mqtt_password"   # MQTT password for authentication

# MQTT Quality of Service (0, 1, or 2)
# 0 = at most once, 1 = at least once, 2 = exactly once
MQTT_QOS=1

# ==============================================================================
# HOST INFORMATION
# ==============================================================================
# Default: uses current hostname in lowercase
# Override if you need a custom identifier
HOST_NAME=$(hostname -s | tr '[:upper:]' '[:lower:]')

# ==============================================================================
# HOME ASSISTANT INTEGRATION
# ==============================================================================
HA_BASE_TOPIC="homeassistant" # Base topic for Home Assistant MQTT discovery

# Language for Home Assistant device labels (en, fr)
# Default: en (English)
# Available: en (English), fr (Fran√ßais)
LANGUAGE="en"

# ==============================================================================
# DATA EXPORT SETTINGS (SentryLab-PVE only)
# ==============================================================================
# Directory for CSV exports - leave empty or comment out to disable
OUTPUT_CSV_DIR="/var/lib/sentrylab/exports"
# Uncomment to disable CSV exports:
# OUTPUT_CSV_DIR=""

# Retention period for CSV backup files (in days)
# Older .csv.bak files will be automatically cleaned up
CSV_RETENTION_DAYS=30

# ==============================================================================
# MONITORING OPTIONS (SentryLab-PVE only)
# ==============================================================================

# Enable/disable specific monitoring features
PUSH_SYSTEM=true            # Monitor CPU temp, load and cores and chassis temp
PUSH_NVME_TEMP=true         # Monitor NVMe drive system temperature sensors
PUSH_NVME_WEAR=true         # Monitor NVMe drive wear levels
PUSH_NVME_HEALTH=true       # Monitor NVMe drive health status
PUSH_ZFS=true               # Monitor ZFS dataset usage and health
PUSH_NON_ZFS=true           # Monitor non-ZFS disk usage

# ==============================================================================
# DOCKER MONITORING OPTIONS (SentryLab-Docker only)
# ==============================================================================

# Docker deployment path on VM/CT
DOCKER_DEPLOY_PATH="/opt/sentrylab"

# Container monitoring poll interval (seconds)
DOCKER_POLL_INTERVAL=30

# Container log level (DEBUG, INFO, WARNING, ERROR)
DOCKER_LOG_LEVEL="INFO"

# Run discovery on container startup
DOCKER_RUN_DISCOVERY_ON_STARTUP=true